# 000006-feat-ios-native-support

## Session 1 — iOS Native Support M7 (2026-02-15 13:22 PST, claude-opus-4-6)

**Agent:** Claude Code (claude-opus-4-6) @ `prism` branch `feat/ios-native-support`

### Intent
Implement iOS native support (M7) so the existing DemoScene (rotating lit cube) runs natively on iOS via an Xcode project generated by xcodegen. This involves moving DemoScene.kt to commonMain, creating an iOS entry point using MTKViewDelegateProtocol + wgpu4k's iosContextRenderer, building an XCFramework, and scaffolding an Xcode project.

### What Changed
- **[2026-02-15 13:22 PST]** `devlog/000006-feat-ios-native-support.md` — Created devlog for this branch

### Decisions
- **[2026-02-15 13:22 PST]** **Move wgpu4k deps to commonMain in prism-demo** — Since prism-renderer already has wgpu4k in commonMain, and DemoScene uses WGPUContext (a wgpu4k type), moving the deps to commonMain is the cleanest approach to share DemoScene across all platforms.

### Research & Discoveries
- `prism-renderer/build.gradle.kts` already has wgpu4k + wgpu4k-toolkit in commonMain deps
- `prism-demo/build.gradle.kts` has them only in jvmMain and wasmJsMain — need to consolidate
- DemoScene.kt uses only common APIs except for `WGPUContext` import which comes from wgpu4k (available on all platforms)
- WASM Main.kt duplicates the entire scene setup inline — can be refactored to use shared createDemoScene()

### Issues
_(none yet)_

### Lessons Learned
_(in progress)_

### Commits
_(in progress)_

---

## Next Steps
- Move wgpu4k deps to commonMain, move DemoScene.kt to commonMain
- Refactor WasmMain.kt to use shared createDemoScene()
- Add iOS XCFramework binary config
- Create IosDemoController.kt in iosMain
- Fix RenderSurface.ios.kt stub
- Create ios-demo/ Xcode project via xcodegen
- Quality checks, BUILD_STATUS.md update
