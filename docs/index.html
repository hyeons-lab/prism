<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Prism Engine — Cross-Platform 3D with Kotlin Multiplatform</title>
    <meta
      name="description"
      content="A modular, cross-platform 3D game engine built with Kotlin Multiplatform and WebGPU. One codebase for Desktop, Web, iOS, Android, and Native."
    />
    <link rel="icon" type="image/png" href="favicon.png" />
    <meta property="og:title" content="Prism Engine" />
    <meta property="og:description" content="A modular, cross-platform 3D game engine built with Kotlin Multiplatform and WebGPU." />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://hyeons-lab.github.io/prism/" />
    <meta property="og:image" content="https://hyeons-lab.github.io/prism/logo.png" />
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:title" content="Prism Engine" />
    <meta name="twitter:description" content="Cross-platform 3D engine built with Kotlin Multiplatform and WebGPU." />
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <a href="#demo" class="skip-link">Skip to content</a>

    <!-- Nav -->
    <nav class="nav" aria-label="Main navigation">
      <div class="nav-inner">
        <a href="#hero" class="nav-logo"><span>&gt;</span> prism</a>
        <ul class="nav-links">
          <li><a href="#demo">Demo</a></li>
          <li><a href="#features">Features</a></li>
          <li><a href="#api">API</a></li>
          <li><a href="#architecture">Architecture</a></li>
          <li><a href="#platforms">Platforms</a></li>
          <li><a href="#milestones">Milestones</a></li>
          <li><a href="#quickstart">Quick Start</a></li>
          <li>
            <a href="https://github.com/hyeons-lab/prism">GitHub</a>
          </li>
        </ul>
      </div>
    </nav>

    <!-- Hero -->
    <section class="hero" id="hero">
      <span class="hero-badge">Kotlin Multiplatform + WebGPU</span>
      <h1><span>Prism</span> Engine</h1>
      <p class="hero-tagline">
        A modular, cross-platform 3D game engine. One Kotlin codebase for
        Desktop, Web, iOS, Android, and Native &mdash; powered by WebGPU via
        wgpu4k.
      </p>
      <div class="hero-buttons">
        <a href="https://github.com/hyeons-lab/prism" class="btn btn-primary">View on GitHub</a>
        <a href="#quickstart" class="btn btn-secondary">Get Started</a>
      </div>
    </section>

    <!-- Demo: unified interactive scene switcher (Kotlin/WASM) — PBR presets, Cornell box, glTF -->
    <section id="demo">
      <iframe
        src="wasm/pbr.html"
        title="Interactive 3D demo: PBR material presets, Cornell box, and DamagedHelmet glTF model rendered with Prism Engine (Kotlin/WASM + WebGPU)"
        class="gltf-wasm-frame"
      ></iframe>
      <div class="gltf-demo-overlay">
        <div class="container">
          <p class="section-label" id="demo-label">PBR Materials</p>
          <h2 class="section-title" id="demo-title">Material Presets</h2>
          <p class="section-desc" id="demo-desc">
            Cook-Torrance BRDF with GGX NDF, Smith-GGX geometry, and Fresnel-Schlick
            reflectance. Five material presets &mdash; Gold, Chrome, Worn Metal, Ceramic,
            and Obsidian &mdash; each with distinct metallic and roughness properties.
          </p>
          <p class="demo-caption" id="demo-caption">Drag to orbit &middot; Use the tabs to switch scenes.</p>
        </div>
      </div>
    </section>
    <script>
      var demoSceneInfo = {
        hero: {
          label: 'PBR Materials',
          title: 'Material Presets',
          desc: 'Cook-Torrance BRDF with GGX NDF, Smith-GGX geometry, and Fresnel-Schlick reflectance. Five material presets \u2014 Gold, Chrome, Worn Metal, Ceramic, and Obsidian \u2014 each with distinct metallic and roughness properties.',
          caption: 'Drag to orbit \u00b7 Use the tabs to switch scenes.'
        },
        cornell: {
          label: 'PBR Materials',
          title: 'Cornell Box',
          desc: 'Classic Cornell box reference render \u2014 PBR-shaded walls with historically accurate muted pigments and a ceiling area light. Geometry from the standard glTF dataset (555\u00d7555\u00d7559 mm room).',
          caption: 'Drag to orbit \u00b7 Use the tabs to switch scenes.'
        },
        gltf: {
          label: 'glTF 2.0 Asset Loading',
          title: 'Damaged Helmet',
          desc: 'Real-time glTF 2.0 rendering with all five PBR textures: base color, metallic-roughness, normal map, ambient occlusion, and emissive. GLB binary parsed at runtime \u2014 no external libraries.',
          caption: 'Drag to orbit \u00b7 Cook-Torrance BRDF + Khronos PBR Neutral tone mapping. Model: <a href="https://github.com/KhronosGroup/glTF-Sample-Assets" style="color:inherit;text-decoration:underline">DamagedHelmet</a> \u00a9 Khronos Group, CC BY 4.0.'
        }
      };
      window.addEventListener('message', function(e) {
        if (!e.data || e.data.type !== 'prismSceneChange') return;
        var info = demoSceneInfo[e.data.scene];
        if (!info) return;
        document.getElementById('demo-label').textContent = info.label;
        document.getElementById('demo-title').textContent = info.title;
        document.getElementById('demo-desc').textContent = info.desc;
        document.getElementById('demo-caption').innerHTML = info.caption;
      });
    </script>

    <!-- Features -->
    <section id="features">
      <div class="container">
        <p class="section-label">Features</p>
        <h2 class="section-title">Everything you need for 3D</h2>
        <p class="section-desc">
          Prism provides a complete engine stack &mdash; from math primitives to
          ECS to GPU rendering &mdash; all shared across every platform.
        </p>
        <div class="features-grid">
          <div class="feature-card">
            <span class="feature-icon">V</span>
            <h3>Math Library</h3>
            <p>
              Vec2/3/4, Mat3/4, Quaternion, and Transform with operator
              overloads. Inline value classes for zero-overhead abstraction.
            </p>
          </div>
          <div class="feature-card">
            <span class="feature-icon">E</span>
            <h3>Entity-Component-System</h3>
            <p>
              World, Entity, Component, and System with query-based iteration.
              Built-in TransformComponent, MeshComponent, and RenderSystem.
            </p>
          </div>
          <div class="feature-card">
            <span class="feature-icon">R</span>
            <h3>wgpu4k Renderer</h3>
            <p>
              WebGPU-backed PBR pipeline with WGSL shaders, Cook-Torrance BRDF,
              HDR rendering, and tone mapping. Metal, Vulkan, DX12, WebGPU.
            </p>
          </div>
          <div class="feature-card">
            <span class="feature-icon">P</span>
            <h3>PBR Materials &amp; IBL</h3>
            <p>
              Cook-Torrance BRDF (GGX NDF, Smith-GGX, Fresnel-Schlick), CPU-side
              IBL (irradiance + prefiltered env + BRDF LUT), HDR + Khronos PBR
              Neutral tone mapping.
            </p>
          </div>
          <div class="feature-card">
            <span class="feature-icon">S</span>
            <h3>Scene Graph</h3>
            <p>
              Node hierarchy with MeshNode, CameraNode, and LightNode.
              Parent-child transforms propagate automatically.
            </p>
          </div>
          <div class="feature-card">
            <span class="feature-icon">C</span>
            <h3>Compose Integration</h3>
            <p>
              Embed 3D surfaces in Jetpack Compose Multiplatform UIs. MVI
              architecture with Store, State, and Events.
            </p>
          </div>
          <div class="feature-card">
            <span class="feature-icon">P</span>
            <h3>Native Surfaces</h3>
            <p>
              PrismSurface with suspend factory across JVM (GLFW), iOS
              (MTKView), macOS (GLFW), WASM (Canvas), and more.
            </p>
          </div>
          <div class="feature-card">
            <span class="feature-icon">I</span>
            <h3>Input System</h3>
            <p>
              Cross-platform keyboard, mouse, and touch abstractions.
              InputManager dispatches events uniformly on every target.
            </p>
          </div>
          <div class="feature-card">
            <span class="feature-icon">A</span>
            <h3>Asset Management</h3>
            <p>
              glTF 2.0 loader with GLB binary parsing, PBR texture support,
              and ECS instantiation. Platform file I/O via kotlinx-io.
            </p>
          </div>
        </div>
      </div>
    </section>

    <!-- Architecture -->
    <section id="architecture">
      <div class="container">
        <p class="section-label">Architecture</p>
        <h2 class="section-title">Modular by design</h2>
        <p class="section-desc">
          Each module has a single responsibility. Depend on only what you need.
        </p>
        <div class="arch-diagram">
          <pre>
<span class="hl">prism-math</span>              <span class="dim">Vector/matrix math, transforms</span>
  <span class="dim">&#x2514;&#x2500;&#x25BA;</span> <span class="hl">prism-core</span>        <span class="dim">Engine core, subsystems, game loop</span>
       <span class="dim">&#x251C;&#x2500;&#x25BA;</span> <span class="hl-green">prism-renderer</span>    <span class="dim">wgpu4k rendering + WGSL shaders</span>
       <span class="dim">&#x2502;</span>    <span class="dim">&#x251C;&#x2500;&#x25BA;</span> prism-scene       <span class="dim">Scene graph</span>
       <span class="dim">&#x2502;</span>    <span class="dim">&#x251C;&#x2500;&#x25BA;</span> prism-ecs         <span class="dim">Entity-Component-System</span>
       <span class="dim">&#x2502;</span>    <span class="dim">&#x2514;&#x2500;&#x25BA;</span> prism-assets      <span class="dim">Asset loading</span>
       <span class="dim">&#x251C;&#x2500;&#x25BA;</span> prism-input       <span class="dim">Cross-platform input</span>
       <span class="dim">&#x2514;&#x2500;&#x25BA;</span> prism-audio       <span class="dim">Audio engine (stub)</span>

<span class="hl-green">prism-renderer</span>
  <span class="dim">&#x2514;&#x2500;&#x25BA;</span> <span class="hl-purple">prism-native-widgets</span>   <span class="dim">Platform rendering surfaces</span>
       <span class="dim">&#x251C;&#x2500;&#x25BA;</span> <span class="hl-purple">prism-compose</span>     <span class="dim">Compose Multiplatform integration</span>
       <span class="dim">&#x2514;&#x2500;&#x25BA;</span> <span class="hl-purple">prism-flutter</span>     <span class="dim">Flutter plugin (Android, iOS, Web)</span>

<span class="hl">prism-js</span>     <span class="dim">@JsExport bridge &#x2192; .d.mts &#x2192; Dart @JS() bindings  (Kotlin/WASM)</span>
<span class="hl">prism-native</span> <span class="dim">@CName bridge &#x2192; libprism_api.h &#x2192; dart:ffi bindings (Kotlin/Native)</span>

<span class="hl">prism-demo-core</span>              <span class="dim">Shared demo (PBR sphere grid, glTF 2.0)</span></pre>
        </div>
      </div>
    </section>

    <!-- API Examples -->
    <section id="api">
      <div class="container">
        <p class="section-label">API</p>
        <h2 class="section-title">Simple from every language</h2>
        <p class="section-desc">
          Prism exposes a clean, idiomatic API in each platform's native language &mdash; no
          boilerplate, no glue code, just the engine.
        </p>
        <div class="lang-grid">

          <details class="lang-card">
            <summary class="lang-label">Kotlin &middot; Android</summary>
<pre class="code-block"><span class="comment">// Parse glTF — geometry, PBR materials, textures</span>
val asset = GltfLoader().load("model.glb", glb)
renderer.upload(asset)
asset.instantiateInWorld(world)

<span class="comment">// Drive the render loop</span>
surface.startRenderLoop { dt, elapsed, _ -&gt;
    world.update(Time(dt, elapsed)) }</pre>
          </details>

          <details class="lang-card">
            <summary class="lang-label">Swift &middot; iOS</summary>
<pre class="code-block">import PrismDemo

<span class="comment">// Parse glTF — suspend fun → async via SKIE</span>
let asset = try await GltfLoader().load(path: "model.glb", data: glb)
renderer.upload(asset: asset)
asset.instantiateInWorld(world: world)

<span class="comment">// Drive the render loop</span>
surface.startRenderLoop { dt, elapsed, _ in
    world.update(Time(dt: dt, elapsed: elapsed)) }</pre>
          </details>

          <details class="lang-card" open>
            <summary class="lang-label">JavaScript &middot; Web (prism-js)</summary>
<pre class="code-block"><span class="comment">// Load the Prism WASM module — auto-generated @JsExport bridge</span>
const mod = await import('./prism.mjs');
await mod.default(); <span class="comment">// instantiate WebAssembly</span>

<span class="comment">// Pin @JsExport functions to window for global access</span>
Object.keys(mod).forEach(n =&gt; {
  if (typeof mod[n] === 'function') window[n] = mod[n];
});

<span class="comment">// Create engine + ECS world</span>
const engine = prismCreateEngine('MyApp', 60);
prismEngineInitialize(engine);
const world  = prismCreateWorld();
const entity = prismWorldCreateEntity(world);
prismWorldAddTransformComponent(world, entity, 0, 0, -5.0);

<span class="comment">// Scene graph</span>
const scene = prismCreateScene('main');
const mesh  = prismCreateMeshNode('helmet');
const cam   = prismCreateCameraNode('cam');
prismSceneAddNode(scene, mesh);
prismSceneAddNode(scene, cam);
prismSceneSetActiveCamera(scene, cam);

<span class="comment">// Query state</span>
console.log('dt:', prismEngineGetDeltaTime(engine),
            'frames:', prismEngineGetFrameCount(engine));</pre>
          </details>

          <details class="lang-card">
            <summary class="lang-label">Dart &middot; Flutter</summary>
<pre class="code-block">import 'package:prism_flutter/prism_flutter.dart';

<span class="comment">// Embed the GPU surface — renders the glTF scene immediately</span>
PrismRenderView(engine: engine)

<span class="comment">// Control from Dart (web: Kotlin/WASM; native: platform channel)</span>
await engine.togglePause();
final state = await engine.getState(); <span class="comment">// { fps: 60.0 }</span></pre>
          </details>

          <details class="lang-card">
            <summary class="lang-label">Dart &middot; FFI (prism-native)</summary>
<pre class="code-block">import 'package:prism_flutter/src/prism_engine_ffi.dart';

<span class="comment">// Auto-generated dart:ffi bindings — loads libprism.dylib/.so/.dll</span>
final engine = PrismEngine();
await engine.initialize(appName: 'MyApp', targetFps: 60);

final state = await engine.getState();
<span class="comment">// { initialized: true, deltaTime: 0.016, totalTime: 1.234, frameCount: 74 }</span>

await engine.shutdown();</pre>
          </details>

        </div>
      </div>
    </section>

    <!-- Platform Support -->
    <section id="platforms">
      <div class="container">
        <p class="section-label">Platform Support</p>
        <h2 class="section-title">Write once, render everywhere</h2>
        <p class="section-desc">
          Prism targets every major platform through Kotlin Multiplatform and
          wgpu4k's WebGPU abstraction.
        </p>
        <div class="arch-diagram">
          <table class="platform-table">
            <thead>
              <tr>
                <th>Platform</th>
                <th>Backend</th>
                <th>Status</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>JVM Desktop (macOS)</td>
                <td>Metal via wgpu4k + GLFW</td>
                <td class="status-done">Working</td>
              </tr>
              <tr>
                <td>JVM Desktop (macOS)</td>
                <td>Metal via wgpu4k + Compose/AWT</td>
                <td class="status-done">Working</td>
              </tr>
              <tr>
                <td>Web (WASM/JS)</td>
                <td>WebGPU</td>
                <td class="status-done">Working</td>
              </tr>
              <tr>
                <td>iOS</td>
                <td>Metal via wgpu4k + MTKView</td>
                <td class="status-done">Working</td>
              </tr>
              <tr>
                <td>macOS Native</td>
                <td>Metal via wgpu4k + GLFW</td>
                <td class="status-done">Working</td>
              </tr>
              <tr>
                <td>Android</td>
                <td>Vulkan via wgpu4k</td>
                <td class="status-done">Working</td>
              </tr>
              <tr>
                <td>JVM Desktop (Linux)</td>
                <td>Vulkan via wgpu4k + GLFW</td>
                <td class="status-planned">Planned</td>
              </tr>
              <tr>
                <td>JVM Desktop (Windows)</td>
                <td>DX12/Vulkan via wgpu4k + GLFW</td>
                <td class="status-planned">Planned</td>
              </tr>
              <tr>
                <td>Flutter (iOS/Android)</td>
                <td>Platform channels + native rendering</td>
                <td class="status-done">Working</td>
              </tr>
              <tr>
                <td>Flutter Web</td>
                <td>WebGPU via HtmlElementView + Kotlin/WASM</td>
                <td class="status-done">Working</td>
              </tr>
              <tr>
                <td>Flutter Desktop (macOS, Windows, Linux)</td>
                <td>Native rendering via platform channels</td>
                <td class="status-planned">Planned</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </section>

    <!-- Milestones -->
    <section id="milestones">
      <div class="container">
        <p class="section-label">Milestones</p>
        <h2 class="section-title">Progress</h2>
        <p class="section-desc">
          Prism is under active development. Here's where things stand.
        </p>
        <div class="milestones">
          <div class="milestone done">
            <span class="milestone-tag">M1</span>
            <div class="milestone-dot"></div>
            <div class="milestone-text">
              <h4>Triangle on screen</h4>
              <p>JVM Desktop with wgpu4k</p>
            </div>
          </div>
          <div class="milestone done">
            <span class="milestone-tag">M2</span>
            <div class="milestone-dot"></div>
            <div class="milestone-text">
              <h4>Rotating cube</h4>
              <p>Camera, depth buffer, transforms</p>
            </div>
          </div>
          <div class="milestone done">
            <span class="milestone-tag">M3</span>
            <div class="milestone-dot"></div>
            <div class="milestone-text">
              <h4>Lit cube</h4>
              <p>Materials, directional lighting, WGSL shaders</p>
            </div>
          </div>
          <div class="milestone done">
            <span class="milestone-tag">M4</span>
            <div class="milestone-dot"></div>
            <div class="milestone-text">
              <h4>ECS-driven rendering</h4>
              <p>World, Entity, Component, System pipeline</p>
            </div>
          </div>
          <div class="milestone done">
            <span class="milestone-tag">M5</span>
            <div class="milestone-dot"></div>
            <div class="milestone-text">
              <h4>Compose integration</h4>
              <p>Embedded 3D in Compose Desktop via MVI</p>
            </div>
          </div>
          <div class="milestone done">
            <span class="milestone-tag">M6</span>
            <div class="milestone-dot"></div>
            <div class="milestone-text">
              <h4>Web/WASM</h4>
              <p>WebGPU rendering in the browser</p>
            </div>
          </div>
          <div class="milestone done">
            <span class="milestone-tag">M7</span>
            <div class="milestone-dot"></div>
            <div class="milestone-text">
              <h4>iOS native</h4>
              <p>MTKView + wgpu4k, Compose iOS demo</p>
            </div>
          </div>
          <div class="milestone done">
            <span class="milestone-tag">M7.5</span>
            <div class="milestone-dot"></div>
            <div class="milestone-text">
              <h4>PrismSurface + macOS native</h4>
              <p>Suspend factory, AppKit controls</p>
            </div>
          </div>
          <div class="milestone done">
            <span class="milestone-tag">M8</span>
            <div class="milestone-dot"></div>
            <div class="milestone-text">
              <h4>Android support</h4>
              <p>Vulkan via wgpu4k, SurfaceView + Choreographer</p>
            </div>
          </div>
          <div class="milestone done">
            <span class="milestone-tag">M9</span>
            <div class="milestone-dot"></div>
            <div class="milestone-text">
              <h4>PBR materials</h4>
              <p>Cook-Torrance BRDF, IBL, HDR tone mapping</p>
            </div>
          </div>
          <div class="milestone done">
            <span class="milestone-tag">M10</span>
            <div class="milestone-dot"></div>
            <div class="milestone-text">
              <h4>glTF asset loading</h4>
              <p>glTF 2.0 meshes, materials, textures, ECS instantiation</p>
            </div>
          </div>
          <div class="milestone done">
            <span class="milestone-tag">M11</span>
            <div class="milestone-dot"></div>
            <div class="milestone-text">
              <h4>Flutter integration</h4>
              <p>Platform channels, native rendering, and Flutter Web via Kotlin/WASM</p>
            </div>
          </div>
          <div class="milestone done">
            <span class="milestone-tag">M12</span>
            <div class="milestone-dot"></div>
            <div class="milestone-text">
              <h4>Auto-generated bindings</h4>
              <p>prism-js: @JsExport &rarr; .d.mts &rarr; Dart @JS() bindings &middot; prism-native: @CName &rarr; libprism_api.h &rarr; dart:ffi bindings</p>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Quick Start -->
    <section id="quickstart">
      <div class="container">
        <p class="section-label">Quick Start</p>
        <h2 class="section-title">Up and running in minutes</h2>
        <div class="quickstart-steps">
          <div class="quickstart-step">
            <h3><span class="step-num">1</span> Build wgpu4k from source</h3>
            <pre class="code-block"><span class="cmd">git clone</span> https://github.com/wgpu4k/wgpu4k.git
<span class="cmd">cd</span> wgpu4k
<span class="cmd">./gradlew</span> publishToMavenLocal</pre>
          </div>
          <div class="quickstart-step">
            <h3><span class="step-num">2</span> Clone and build Prism</h3>
            <pre class="code-block"><span class="cmd">git clone</span> https://github.com/hyeons-lab/prism.git
<span class="cmd">cd</span> prism
<span class="cmd">./gradlew</span> build</pre>
          </div>
          <div class="quickstart-step">
            <h3><span class="step-num">3</span> Run the demo</h3>
            <pre class="code-block"><span class="comment"># GLFW window — PBR sphere grid (Metal on macOS)</span>
<span class="cmd">./gradlew</span> :prism-demo-core:jvmRun

<span class="comment"># Compose Desktop with embedded 3D + PBR sliders</span>
<span class="cmd">./gradlew</span> :prism-demo-core:runCompose

<span class="comment"># WASM in the browser</span>
<span class="cmd">./gradlew</span> :prism-demo-core:wasmJsBrowserDistribution</pre>
          </div>
        </div>
      </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
      <ul class="footer-links">
        <li>
          <a href="https://github.com/hyeons-lab/prism">GitHub</a>
        </li>
        <li>
          <a href="https://github.com/hyeons-lab/prism/blob/main/PLAN.md">Roadmap</a>
        </li>
        <li>
          <a href="https://github.com/hyeons-lab/prism/blob/main/LICENSE">License</a>
        </li>
      </ul>
      <p>Apache License 2.0 &mdash; Copyright 2025-2026 Hyeons' Lab</p>
    </footer>
  </body>
</html>
